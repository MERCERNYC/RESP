{"ast":null,"code":"var _jsxFileName = \"/home/abiery/Projects/RESP/src/components/CheckIn.js\";\nimport React, { Component } from 'react';\nimport { stitchClient, db } from '../stitch/database';\nimport { loginAnonymous } from '../stitch/auth';\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom';\nimport { Formik } from 'formik';\nimport PersonFound from './PersonFound';\nimport AssignLocation from './AssignLocation';\nimport Loading from './Loading';\nimport Camera from './Camera';\nexport default class CheckIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      description: undefined,\n      picture: undefined,\n      found: []\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.storePictureURI = this.storePictureURI.bind(this);\n    this.anyMatches = this.anyMatches.bind(this);\n  }\n\n  componentDidMount() {\n    this.moveOn = false;\n    this.client = stitchClient;\n    this.db = db;\n    loginAnonymous();\n  }\n\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  storePictureURI(uri) {\n    this.setState({\n      picture: uri\n    });\n  }\n\n  async anyMatches() {\n    var matches = [];\n    await this.db.collection('missing').find({\n      first: this.state.first\n    }, {\n      limit: 20\n    }).toArray().then(people => {\n      people.forEach(person => matches.push(person));\n    }).catch(err => console.error(\"Failed to find documents: \".concat(err)));\n    this.setState({\n      found: matches\n    });\n    this.personFound = !(this.state.found.length === 0);\n    return this.moveOn = true;\n  }\n\n  render() {\n    if (!this.moveOn) {\n      return;\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Check-In\"), React.createElement(\"form\", {\n        id: \"checkin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"First Name:\", React.createElement(\"input\", {\n        name: \"first\",\n        type: \"text\",\n        value: this.state.first,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Last Name:\", React.createElement(\"input\", {\n        name: \"last\",\n        type: \"text\",\n        value: this.state.last,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Middle Initial:\", React.createElement(\"input\", {\n        name: \"mi\",\n        type: \"text\",\n        value: this.state.mi,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Date of Birth:\", React.createElement(\"input\", {\n        name: \"dob\",\n        type: \"text\",\n        value: this.state.dob,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Sex:\", React.createElement(\"input\", {\n        name: \"sex\",\n        type: \"text\",\n        value: this.state.sex,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Height:\", React.createElement(\"input\", {\n        name: \"height\",\n        type: \"text\",\n        value: this.state.height,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Weight:\", React.createElement(\"input\", {\n        name: \"weight\",\n        type: \"text\",\n        value: this.state.weight,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Description:\", React.createElement(\"input\", {\n        name: \"description\",\n        type: \"text\",\n        value: this.state.description,\n        onChange: this.handleFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), \"Take Picture:\", React.createElement(Camera, {\n        storePicture: uri => this.storePictureURI(uri),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.anyMatches,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Next\")));\n    } else {\n      return React.createElement(Loading, Object.assign({}, this.state, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }));\n    }\n  }\n\n}","map":{"version":3,"sources":["/home/abiery/Projects/RESP/src/components/CheckIn.js"],"names":["React","Component","stitchClient","db","loginAnonymous","BrowserRouter","Router","Route","Link","Redirect","Formik","PersonFound","AssignLocation","Loading","Camera","CheckIn","constructor","props","state","owner_id","undefined","first","last","mi","dob","sex","height","weight","description","picture","found","handleFill","bind","storePictureURI","anyMatches","componentDidMount","moveOn","client","event","target","name","value","setState","uri","matches","collection","find","limit","toArray","then","people","forEach","person","push","catch","err","console","error","personFound","length","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { stitchClient, db } from '../stitch/database';\nimport { loginAnonymous } from '../stitch/auth';\nimport {BrowserRouter as Router, Route, Link, Redirect} from 'react-router-dom';\nimport { Formik } from 'formik';\nimport PersonFound from './PersonFound';\nimport AssignLocation from './AssignLocation';\nimport Loading from './Loading';\nimport Camera from './Camera';\n\nexport default class CheckIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      description: undefined,\n      picture: undefined,\n      found: [],\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.storePictureURI = this.storePictureURI.bind(this);\n    this.anyMatches = this.anyMatches.bind(this);\n  }\n\n  componentDidMount() {\n    this.moveOn = false\n    this.client = stitchClient;\n    this.db = db;\n    loginAnonymous();\n  }\n\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({ [name] : value});\n  }\n\n  storePictureURI(uri) {\n    this.setState({picture: uri});\n  }\n\n  async anyMatches() {\n    var matches = [];\n    await this.db.collection('missing')\n      .find({first : this.state.first}, { limit: 20 })\n      .toArray()\n      .then(people => {\n        people.forEach(person => matches.push(person));\n      })\n      .catch(err => console.error(`Failed to find documents: ${err}`));\n    this.setState({found : matches});\n    this.personFound = !(this.state.found.length === 0);\n    return this.moveOn = true;\n  }\n\n  render() {\n      if(!this.moveOn) {\n        return\n          <div>\n            <h3>Check-In</h3>\n            <form id='checkin'>\n              <label>\n                First Name:\n                 <input name=\"first\" type=\"text\" value={this.state.first} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Last Name:\n                 <input name=\"last\" type=\"text\" value={this.state.last} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Middle Initial:\n                 <input name=\"mi\" type=\"text\" value={this.state.mi} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Date of Birth:\n                 <input name=\"dob\" type=\"text\" value={this.state.dob} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Sex:\n                 <input name=\"sex\" type=\"text\" value={this.state.sex} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Height:\n                 <input name=\"height\" type=\"text\" value={this.state.height} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Weight:\n                 <input name=\"weight\" type=\"text\" value={this.state.weight} onChange={this.handleFill} />\n              </label>\n              <p></p>\n              <label>\n                Description:\n                 <input name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleFill} />\n              </label>\n              <p></p>\n                Take Picture:\n                <Camera storePicture={(uri) => this.storePictureURI(uri)}/>\n              <p></p>\n              <button type=\"button\" onClick={this.anyMatches}>Next</button>\n            </form>\n          </div>\n        } else {\n          return <Loading {...this.state} />\n        }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}