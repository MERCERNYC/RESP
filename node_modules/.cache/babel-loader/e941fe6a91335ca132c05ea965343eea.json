{"ast":null,"code":"var _jsxFileName = \"/home/abiery/Projects/RESP/src/components/CheckIn.js\";\nimport React, { Component, Fragment } from 'react';\nimport { stitchClient, db } from '../stitch/database';\nimport { loginAnonymous } from '../stitch/auth';\nimport { Formik } from 'formik';\nimport camera from './camera.jpg';\nimport PersonFound from './PersonFound';\nexport default class CheckIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      description: undefined,\n      picture: undefined,\n      found: []\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.storePictureURI = this.storePictureURI.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n\n  componentDidMount() {\n    this.client = stitchClient;\n    this.db = db;\n    loginAnonymous();\n  }\n\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  storePictureURI(uri) {\n    this.setState({\n      picture: uri\n    });\n  }\n\n  addFound(event) {\n    event.preventDefault();\n    this.db.collection(\"found\").insertOne({\n      owner_id: this.client.auth.user.id,\n      first: this.state.first,\n      last: this.state.last,\n      mi: this.state.mi,\n      dob: this.state.dob,\n      sex: this.state.sex,\n      height: this.state.height,\n      weight: this.state.weight,\n      description: this.state.description,\n      picture: this.state.picture\n    }).catch(console.error);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"CheckIn\"), React.createElement(\"form\", {\n      id: \"checkin\",\n      onSubmit: this.addFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"First Name:\", React.createElement(\"input\", {\n      name: \"first\",\n      type: \"text\",\n      value: this.state.first,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Last Name:\", React.createElement(\"input\", {\n      name: \"last\",\n      type: \"text\",\n      value: this.state.last,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Middle Initial:\", React.createElement(\"input\", {\n      name: \"mi\",\n      type: \"text\",\n      value: this.state.mi,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Date of Birth:\", React.createElement(\"input\", {\n      name: \"dob\",\n      type: \"text\",\n      value: this.state.dob,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Sex:\", React.createElement(\"input\", {\n      name: \"sex\",\n      type: \"text\",\n      value: this.state.sex,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Height:\", React.createElement(\"input\", {\n      name: \"height\",\n      type: \"text\",\n      value: this.state.height,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Weight:\", React.createElement(\"input\", {\n      name: \"weight\",\n      type: \"text\",\n      value: this.state.weight,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Description:\", React.createElement(\"input\", {\n      name: \"description\",\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), \"Take Picture:\", React.createElement(Camera, {\n      storePicture: uri => this.storePictureURI(uri),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Next\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass Camera extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      buttons: undefined\n    };\n    this.getCamera = this.getCamera.bind(this);\n    this.getPicture = this.getPicture.bind(this);\n    this.tryAgain = this.tryAgain.bind(this);\n  }\n\n  componentDidMount() {\n    this.video = document.querySelector('.camera');\n  }\n\n  getCamera() {\n    navigator.mediaDevices.getUserMedia({\n      video: {\n        facingMode: \"environment\"\n      },\n      audio: false\n    }).then(localMediaStream => {\n      this.video.srcObject = localMediaStream;\n      this.video.play();\n      this.setState({\n        buttons: React.createElement(\"button\", {\n          type: \"button\",\n          onClick: this.getPicture,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Take Picture\")\n      });\n    }).catch(err => {\n      console.error(\"Error with getting media:\", err);\n    });\n  }\n\n  tryAgain() {\n    this.video.play();\n    this.setState({\n      buttons: React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.getPicture,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Take Picture\")\n    });\n  }\n\n  getPicture() {\n    this.video.pause();\n    const width = this.video.videoWidth;\n    const height = this.video.videoHeight;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.drawImage(this.video, 0, 0, width, height);\n    const dataURL = this.canvas.toDataURL('image/jpeg');\n    this.setState({\n      buttons: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.props.storePicture(dataURL) && this.video.srcObject.getTracks()[0].stop(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Confirm Picture\"), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.tryAgain,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Try Again\"))\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"video\", {\n      className: \"camera\",\n      poster: camera,\n      onClick: this.getCamera,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), this.state.buttons);\n  }\n\n}\n/*\nclass AssignLocation extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.client = Stitch.initializeDefaultAppClient(\"resp-nqkab\");\n    const mongodb = this.client.getServiceClient(\n      RemoteMongoClient.factory,\n      \"mongodb-atlas\"\n    );\n    this.db = mongodb.db(\"sample_disaster\");\n    this.client.auth\n      .loginWithCredential(new AnonymousCredential())\n      .catch(console.error);\n  }\n\n  addFound(event) {\n    event.preventDefault();\n    this.db\n      .collection(\"found\")\n      .insertOne({\n        owner_id: this.client.auth.user.id,\n        first: this.state.first,\n        last: this.state.last,\n        mi: this.state.mi,\n        dob: this.state.dob,\n        sex: this.state.sex,\n        height: this.state.height,\n        weight: this.state.weight,\n        description: this.state.description,\n        picture: this.state.picture\n      })\n      .then(this.displayFound)\n      .catch(console.error);\n  }\n\n  render() {\n    return(\n      <h3>Assign Location</h3>\n    );\n  }\n}\n*/","map":{"version":3,"sources":["/home/abiery/Projects/RESP/src/components/CheckIn.js"],"names":["React","Component","Fragment","stitchClient","db","loginAnonymous","Formik","camera","PersonFound","CheckIn","constructor","props","state","owner_id","undefined","first","last","mi","dob","sex","height","weight","description","picture","found","handleFill","bind","storePictureURI","addFound","componentDidMount","client","event","target","name","value","setState","uri","preventDefault","collection","insertOne","auth","user","id","catch","console","error","render","Camera","buttons","getCamera","getPicture","tryAgain","video","document","querySelector","navigator","mediaDevices","getUserMedia","facingMode","audio","then","localMediaStream","srcObject","play","err","pause","width","videoWidth","videoHeight","canvas","createElement","ctx","getContext","drawImage","dataURL","toDataURL","storePicture","getTracks","stop"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAASC,YAAT,EAAuBC,EAAvB,QAAiC,oBAAjC;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,eAAe,MAAMC,OAAN,SAAsBR,SAAtB,CAAgC;AAC7CS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAEC,SADC;AAEXC,MAAAA,KAAK,EAAED,SAFI;AAGXE,MAAAA,IAAI,EAAEF,SAHK;AAIXG,MAAAA,EAAE,EAAEH,SAJO;AAKXI,MAAAA,GAAG,EAAEJ,SALM;AAMXK,MAAAA,GAAG,EAAEL,SANM;AAOXM,MAAAA,MAAM,EAAEN,SAPG;AAQXO,MAAAA,MAAM,EAAEP,SARG;AASXQ,MAAAA,WAAW,EAAER,SATF;AAUXS,MAAAA,OAAO,EAAET,SAVE;AAWXU,MAAAA,KAAK,EAAE;AAXI,KAAb;AAaA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDG,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,MAAL,GAAc3B,YAAd;AACA,SAAKC,EAAL,GAAUA,EAAV;AACAC,IAAAA,cAAc;AACf;;AAEDoB,EAAAA,UAAU,CAACM,KAAD,EAAQ;AAChB,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;AACA,UAAMC,KAAK,GAAGF,MAAM,CAACE,KAArB;AACA,SAAKC,QAAL,CAAc;AAAE,OAACF,IAAD,GAASC;AAAX,KAAd;AACD;;AAEDP,EAAAA,eAAe,CAACS,GAAD,EAAM;AACnB,SAAKD,QAAL,CAAc;AAACZ,MAAAA,OAAO,EAAEa;AAAV,KAAd;AACD;;AAEDR,EAAAA,QAAQ,CAACG,KAAD,EAAQ;AACdA,IAAAA,KAAK,CAACM,cAAN;AACA,SAAKjC,EAAL,CACGkC,UADH,CACc,OADd,EAEGC,SAFH,CAEa;AACT1B,MAAAA,QAAQ,EAAE,KAAKiB,MAAL,CAAYU,IAAZ,CAAiBC,IAAjB,CAAsBC,EADvB;AAET3B,MAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAFT;AAGTC,MAAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWI,IAHR;AAITC,MAAAA,EAAE,EAAE,KAAKL,KAAL,CAAWK,EAJN;AAKTC,MAAAA,GAAG,EAAE,KAAKN,KAAL,CAAWM,GALP;AAMTC,MAAAA,GAAG,EAAE,KAAKP,KAAL,CAAWO,GANP;AAOTC,MAAAA,MAAM,EAAE,KAAKR,KAAL,CAAWQ,MAPV;AAQTC,MAAAA,MAAM,EAAE,KAAKT,KAAL,CAAWS,MARV;AASTC,MAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWU,WATf;AAUTC,MAAAA,OAAO,EAAE,KAAKX,KAAL,CAAWW;AAVX,KAFb,EAcGoB,KAdH,CAcSC,OAAO,CAACC,KAdjB;AAeD;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAM,MAAA,EAAE,EAAC,SAAT;AAAmB,MAAA,QAAQ,EAAE,KAAKlB,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEG;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,MAAzB;AAAgC,MAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWG,KAAlD;AAAyD,MAAA,QAAQ,EAAE,KAAKU,UAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEG;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,MAAxB;AAA+B,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWI,IAAjD;AAAuD,MAAA,QAAQ,EAAE,KAAKS,UAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CANF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEG;AAAO,MAAA,IAAI,EAAC,IAAZ;AAAiB,MAAA,IAAI,EAAC,MAAtB;AAA6B,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWK,EAA/C;AAAmD,MAAA,QAAQ,EAAE,KAAKQ,UAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAXF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEG;AAAO,MAAA,IAAI,EAAC,KAAZ;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAA8B,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWM,GAAhD;AAAqD,MAAA,QAAQ,EAAE,KAAKO,UAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAhBF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAEG;AAAO,MAAA,IAAI,EAAC,KAAZ;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAA8B,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWO,GAAhD;AAAqD,MAAA,QAAQ,EAAE,KAAKM,UAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CArBF,EAyBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBF,EA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEG;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,MAA1B;AAAiC,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWQ,MAAnD;AAA2D,MAAA,QAAQ,EAAE,KAAKK,UAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CA1BF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9BF,EA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEG;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,MAA1B;AAAiC,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWS,MAAnD;AAA2D,MAAA,QAAQ,EAAE,KAAKI,UAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CA/BF,EAmCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnCF,EAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEG;AAAO,MAAA,IAAI,EAAC,aAAZ;AAA0B,MAAA,IAAI,EAAC,MAA/B;AAAsC,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWU,WAAxD;AAAqE,MAAA,QAAQ,EAAE,KAAKG,UAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CApCF,EAwCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCF,mBA0CI,oBAAC,MAAD;AAAQ,MAAA,YAAY,EAAGW,GAAD,IAAS,KAAKT,eAAL,CAAqBS,GAArB,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1CJ,EA2CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CF,EA4CE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5CF,CAFF,CADF;AAmDD;;AA7G4C;;AAgH/C,MAAMW,MAAN,SAAqB9C,SAArB,CAA+B;AAC7BS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXoC,MAAAA,OAAO,EAAElC;AADE,KAAb;AAGA,SAAKmC,SAAL,GAAiB,KAAKA,SAAL,CAAevB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKwB,UAAL,GAAkB,KAAKA,UAAL,CAAgBxB,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKyB,QAAL,GAAgB,KAAKA,QAAL,CAAczB,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AACDG,EAAAA,iBAAiB,GAAG;AAClB,SAAKuB,KAAL,GAAaC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAb;AACD;;AACDL,EAAAA,SAAS,GAAG;AACVM,IAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEL,MAAAA,KAAK,EAAE;AAAEM,QAAAA,UAAU,EAAE;AAAd,OAAT;AAAwCC,MAAAA,KAAK,EAAE;AAA/C,KAApC,EACGC,IADH,CACQC,gBAAgB,IAAI;AACxB,WAAKT,KAAL,CAAWU,SAAX,GAAuBD,gBAAvB;AACA,WAAKT,KAAL,CAAWW,IAAX;AACA,WAAK5B,QAAL,CAAc;AAACa,QAAAA,OAAO,EAAG;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,OAAO,EAAE,KAAKE,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAX,OAAd;AACD,KALH,EAMGP,KANH,CAMSqB,GAAG,IAAI;AACZpB,MAAAA,OAAO,CAACC,KAAR,8BAA2CmB,GAA3C;AACD,KARH;AASD;;AACDb,EAAAA,QAAQ,GAAG;AACT,SAAKC,KAAL,CAAWW,IAAX;AACA,SAAK5B,QAAL,CAAc;AAACa,MAAAA,OAAO,EAAG;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,OAAO,EAAE,KAAKE,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAX,KAAd;AACD;;AACDA,EAAAA,UAAU,GAAG;AACX,SAAKE,KAAL,CAAWa,KAAX;AACA,UAAMC,KAAK,GAAG,KAAKd,KAAL,CAAWe,UAAzB;AACA,UAAM/C,MAAM,GAAG,KAAKgC,KAAL,CAAWgB,WAA1B;AACA,SAAKC,MAAL,GAAchB,QAAQ,CAACiB,aAAT,CAAuB,QAAvB,CAAd;AACA,SAAKC,GAAL,GAAW,KAAKF,MAAL,CAAYG,UAAZ,CAAuB,IAAvB,CAAX;AACA,SAAKD,GAAL,CAASE,SAAT,CAAmB,KAAKrB,KAAxB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCc,KAArC,EAA4C9C,MAA5C;AACA,UAAMsD,OAAO,GAAG,KAAKL,MAAL,CAAYM,SAAZ,CAAsB,YAAtB,CAAhB;AACA,SAAKxC,QAAL,CAAc;AAACa,MAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,OAAO,EAAE,KAAKrC,KAAL,CAAWiE,YAAX,CAAwBF,OAAxB,KAAoC,KAAKtB,KAAL,CAAWU,SAAX,CAAqBe,SAArB,GAAiC,CAAjC,EAAoCC,IAApC,EAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,EAEE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,OAAO,EAAE,KAAK3B,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAV,KAAd;AAID;;AACDL,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,QAAjB;AAA0B,MAAA,MAAM,EAAEvC,MAAlC;AAA0C,MAAA,OAAO,EAAE,KAAK0C,SAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGG,KAAKrC,KAAL,CAAWoC,OAHd,CADF;AAOD;;AAjD4B;AAoD/B","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport { stitchClient, db } from '../stitch/database';\nimport { loginAnonymous } from '../stitch/auth';\nimport { Formik } from 'formik';\nimport camera from './camera.jpg';\nimport PersonFound from './PersonFound';\n\nexport default class CheckIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      description: undefined,\n      picture: undefined,\n      found: [],\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.storePictureURI = this.storePictureURI.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n\n  componentDidMount() {\n    this.client = stitchClient;\n    this.db = db;\n    loginAnonymous();\n  }\n\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({ [name] : value});\n  }\n\n  storePictureURI(uri) {\n    this.setState({picture: uri});\n  }\n\n  addFound(event) {\n    event.preventDefault();\n    this.db\n      .collection(\"found\")\n      .insertOne({\n        owner_id: this.client.auth.user.id,\n        first: this.state.first,\n        last: this.state.last,\n        mi: this.state.mi,\n        dob: this.state.dob,\n        sex: this.state.sex,\n        height: this.state.height,\n        weight: this.state.weight,\n        description: this.state.description,\n        picture: this.state.picture\n      })\n      .catch(console.error);\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>CheckIn</h3>\n        <form id='checkin' onSubmit={this.addFound}>\n          <label>\n            First Name:\n             <input name=\"first\" type=\"text\" value={this.state.first} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Last Name:\n             <input name=\"last\" type=\"text\" value={this.state.last} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Middle Initial:\n             <input name=\"mi\" type=\"text\" value={this.state.mi} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Date of Birth:\n             <input name=\"dob\" type=\"text\" value={this.state.dob} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Sex:\n             <input name=\"sex\" type=\"text\" value={this.state.sex} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Height:\n             <input name=\"height\" type=\"text\" value={this.state.height} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Weight:\n             <input name=\"weight\" type=\"text\" value={this.state.weight} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Description:\n             <input name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleFill} />\n          </label>\n          <p></p>\n            Take Picture:\n            <Camera storePicture={(uri) => this.storePictureURI(uri)}/>\n          <p></p>\n          <input type=\"submit\" value=\"Next\"/>\n        </form>\n      </div>\n    );\n  }\n}\n\nclass Camera extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      buttons: undefined,\n    };\n    this.getCamera = this.getCamera.bind(this);\n    this.getPicture = this.getPicture.bind(this);\n    this.tryAgain = this.tryAgain.bind(this);\n  }\n  componentDidMount() {\n    this.video = document.querySelector('.camera');\n  }\n  getCamera() {\n    navigator.mediaDevices.getUserMedia({ video: { facingMode: \"environment\" }, audio: false })\n      .then(localMediaStream => {\n        this.video.srcObject = localMediaStream;\n        this.video.play();\n        this.setState({buttons : <button type=\"button\" onClick={this.getPicture}>Take Picture</button>});\n      })\n      .catch(err => {\n        console.error(`Error with getting media:`, err);\n      });\n  }\n  tryAgain() {\n    this.video.play();\n    this.setState({buttons : <button type=\"button\" onClick={this.getPicture}>Take Picture</button>});\n  }\n  getPicture() {\n    this.video.pause();\n    const width = this.video.videoWidth;\n    const height = this.video.videoHeight;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.drawImage(this.video, 0, 0, width, height);\n    const dataURL = this.canvas.toDataURL('image/jpeg');\n    this.setState({buttons: <div>\n                              <button type=\"button\" onClick={this.props.storePicture(dataURL) && this.video.srcObject.getTracks()[0].stop()}>Confirm Picture</button>\n                              <button type=\"button\" onClick={this.tryAgain}>Try Again</button>\n                            </div>});\n  }\n  render() {\n    return(\n      <div>\n        <video className='camera' poster={camera} onClick={this.getCamera}></video>\n        <p></p>\n        {this.state.buttons}\n      </div>\n    );\n  }\n}\n\n/*\nclass AssignLocation extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.client = Stitch.initializeDefaultAppClient(\"resp-nqkab\");\n    const mongodb = this.client.getServiceClient(\n      RemoteMongoClient.factory,\n      \"mongodb-atlas\"\n    );\n    this.db = mongodb.db(\"sample_disaster\");\n    this.client.auth\n      .loginWithCredential(new AnonymousCredential())\n      .catch(console.error);\n  }\n\n  addFound(event) {\n    event.preventDefault();\n    this.db\n      .collection(\"found\")\n      .insertOne({\n        owner_id: this.client.auth.user.id,\n        first: this.state.first,\n        last: this.state.last,\n        mi: this.state.mi,\n        dob: this.state.dob,\n        sex: this.state.sex,\n        height: this.state.height,\n        weight: this.state.weight,\n        description: this.state.description,\n        picture: this.state.picture\n      })\n      .then(this.displayFound)\n      .catch(console.error);\n  }\n\n  render() {\n    return(\n      <h3>Assign Location</h3>\n    );\n  }\n}\n*/\n"]},"metadata":{},"sourceType":"module"}