{"ast":null,"code":"var _jsxFileName = \"/home/abiery/Projects/RESP/src/Components/App.js\";\nimport React, { Component } from \"react\";\nimport { Stitch, AnonymousCredential, RemoteMongoClient } from \"mongodb-stitch-browser-sdk\";\nimport 'file-loader';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      picture_status: undefined,\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      campsite: undefined,\n      description: undefined,\n      picture: undefined\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.getVideo = this.getVideo.bind(this);\n    this.getPicture = this.getPicture.bind(this);\n    this.confirmPicture = this.confirmPicture.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n\n  componentDidMount() {\n    this.client = Stitch.initializeDefaultAppClient(\"resp-nqkab\");\n    const mongodb = this.client.getServiceClient(RemoteMongoClient.factory, \"mongodb-atlas\");\n    this.db = mongodb.db(\"sample_disaster\");\n    this.client.auth.loginWithCredential(new AnonymousCredential()).catch(console.error);\n  }\n\n  addFound(event) {\n    event.preventDefault();\n    this.db.collection(\"found\").insertOne({\n      owner_id: this.client.auth.user.id,\n      first: this.state.first,\n      last: this.state.last,\n      mi: this.state.mi,\n      dob: this.state.dob,\n      sex: this.state.sex,\n      height: this.state.height,\n      weight: this.state.weight,\n      campsite: this.state.campsite,\n      description: this.state.description,\n      picture: this.state.picture\n    }).then(this.displayFound).catch(console.error);\n  }\n\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  pictureControl(status) {\n    switch (status) {\n      case \"camera opened\":\n        return React.createElement(\"video\", {\n          class: \"player\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"button\",\n          onClick: this.getPicture,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, \"Take Picture\");\n\n      case \"picture taken\":\n        return React.createElement(\"canvas\", {\n          class: \"picture\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"button\",\n          onClick: this.confirmPicture,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"Confirm Picture\");\n\n      default:\n        return React.createElement(\"img\", {\n          src: require('camera.jpg'),\n          alt: \"Image Unavailable\",\n          onClick: this.getVideo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        });\n    }\n  }\n\n  getVideo() {\n    this.state.picture_status = \"camera opened\";\n    this.video = document.querySelector('.player');\n    navigator.mediaDevices.getUserMedia({\n      video: {\n        facingMode: \"environment\"\n      },\n      audio: false\n    }).then(localMediaStream => {\n      this.video.srcObject = localMediaStream;\n      this.video.play();\n    }).catch(err => {\n      console.error(\"Error with getting media:\", err);\n    });\n  }\n\n  getPicture() {\n    this.video.pause();\n    this.state.picture_status = \"picture taken\";\n    this.canvas = document.querySelector('.picture');\n    this.ctx = this.canvas.getContext('2d');\n    const width = this.video.videoWidth;\n    const height = this.video.videoHeight;\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.ctx.drawImage(this.video, 0, 0, width, height);\n    const dataURL = this.canvas.toDataURL('image/jpeg');\n    this.setState({\n      picture: dataURL\n    });\n  }\n\n  confirmPicture() {\n    this.video.srcObject.getTracks()[0].stop();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"CheckIn\"), React.createElement(\"form\", {\n      id: \"checkin\",\n      onSubmit: this.addFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"First Name:\", React.createElement(\"input\", {\n      name: \"first\",\n      type: \"text\",\n      value: this.state.first,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Last Name:\", React.createElement(\"input\", {\n      name: \"last\",\n      type: \"text\",\n      value: this.state.last,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Middle Initial:\", React.createElement(\"input\", {\n      name: \"mi\",\n      type: \"text\",\n      value: this.state.mi,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Date of Birth:\", React.createElement(\"input\", {\n      name: \"dob\",\n      type: \"text\",\n      value: this.state.dob,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Sex:\", React.createElement(\"input\", {\n      name: \"sex\",\n      type: \"text\",\n      value: this.state.sex,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Height:\", React.createElement(\"input\", {\n      name: \"height\",\n      type: \"text\",\n      value: this.state.height,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Weight:\", React.createElement(\"input\", {\n      name: \"weight\",\n      type: \"text\",\n      value: this.state.weight,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Campsite:\", React.createElement(\"input\", {\n      name: \"campsite\",\n      type: \"text\",\n      value: this.state.campsite,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Description:\", React.createElement(\"input\", {\n      name: \"description\",\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.handleFill,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), this.pictureControl(this.state.picture_status), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/abiery/Projects/RESP/src/Components/App.js"],"names":["React","Component","Stitch","AnonymousCredential","RemoteMongoClient","App","constructor","state","picture_status","undefined","owner_id","first","last","mi","dob","sex","height","weight","campsite","description","picture","handleFill","bind","getVideo","getPicture","confirmPicture","addFound","componentDidMount","client","initializeDefaultAppClient","mongodb","getServiceClient","factory","db","auth","loginWithCredential","catch","console","error","event","preventDefault","collection","insertOne","user","id","then","displayFound","target","name","value","setState","pictureControl","status","require","video","document","querySelector","navigator","mediaDevices","getUserMedia","facingMode","audio","localMediaStream","srcObject","play","err","pause","canvas","ctx","getContext","width","videoWidth","videoHeight","drawImage","dataURL","toDataURL","getTracks","stop","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,MADF,EAEEC,mBAFF,EAGEC,iBAHF,QAIO,4BAJP;AAKA,OAAO,aAAP;;AAEA,MAAMC,GAAN,SAAkBJ,SAAlB,CAA4B;AAC1BK,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,cAAc,EAAEC,SADL;AAEXC,MAAAA,QAAQ,EAAED,SAFC;AAGXE,MAAAA,KAAK,EAAEF,SAHI;AAIXG,MAAAA,IAAI,EAAEH,SAJK;AAKXI,MAAAA,EAAE,EAAEJ,SALO;AAMXK,MAAAA,GAAG,EAAEL,SANM;AAOXM,MAAAA,GAAG,EAAEN,SAPM;AAQXO,MAAAA,MAAM,EAAEP,SARG;AASXQ,MAAAA,MAAM,EAAER,SATG;AAUXS,MAAAA,QAAQ,EAAET,SAVC;AAWXU,MAAAA,WAAW,EAAEV,SAXF;AAYXW,MAAAA,OAAO,EAAEX;AAZE,KAAb;AAcA,SAAKY,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBH,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKI,QAAL,GAAgB,KAAKA,QAAL,CAAcJ,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDK,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,MAAL,GAAc1B,MAAM,CAAC2B,0BAAP,CAAkC,YAAlC,CAAd;AACA,UAAMC,OAAO,GAAG,KAAKF,MAAL,CAAYG,gBAAZ,CACd3B,iBAAiB,CAAC4B,OADJ,EAEd,eAFc,CAAhB;AAIA,SAAKC,EAAL,GAAUH,OAAO,CAACG,EAAR,CAAW,iBAAX,CAAV;AACA,SAAKL,MAAL,CAAYM,IAAZ,CACGC,mBADH,CACuB,IAAIhC,mBAAJ,EADvB,EAEGiC,KAFH,CAESC,OAAO,CAACC,KAFjB;AAGD;;AACDZ,EAAAA,QAAQ,CAACa,KAAD,EAAQ;AACdA,IAAAA,KAAK,CAACC,cAAN;AACA,SAAKP,EAAL,CACGQ,UADH,CACc,OADd,EAEGC,SAFH,CAEa;AACThC,MAAAA,QAAQ,EAAE,KAAKkB,MAAL,CAAYM,IAAZ,CAAiBS,IAAjB,CAAsBC,EADvB;AAETjC,MAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KAFT;AAGTC,MAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IAHR;AAITC,MAAAA,EAAE,EAAE,KAAKN,KAAL,CAAWM,EAJN;AAKTC,MAAAA,GAAG,EAAE,KAAKP,KAAL,CAAWO,GALP;AAMTC,MAAAA,GAAG,EAAE,KAAKR,KAAL,CAAWQ,GANP;AAOTC,MAAAA,MAAM,EAAE,KAAKT,KAAL,CAAWS,MAPV;AAQTC,MAAAA,MAAM,EAAE,KAAKV,KAAL,CAAWU,MARV;AASTC,MAAAA,QAAQ,EAAE,KAAKX,KAAL,CAAWW,QATZ;AAUTC,MAAAA,WAAW,EAAE,KAAKZ,KAAL,CAAWY,WAVf;AAWTC,MAAAA,OAAO,EAAE,KAAKb,KAAL,CAAWa;AAXX,KAFb,EAeGyB,IAfH,CAeQ,KAAKC,YAfb,EAgBGV,KAhBH,CAgBSC,OAAO,CAACC,KAhBjB;AAiBD;;AACDjB,EAAAA,UAAU,CAACkB,KAAD,EAAQ;AAChB,UAAMQ,MAAM,GAAGR,KAAK,CAACQ,MAArB;AACA,UAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;AACA,UAAMC,KAAK,GAAGF,MAAM,CAACE,KAArB;AACA,SAAKC,QAAL,CAAc;AAAE,OAACF,IAAD,GAASC;AAAX,KAAd;AACD;;AACDE,EAAAA,cAAc,CAACC,MAAD,EAAS;AACrB,YAAOA,MAAP;AACE,WAAK,eAAL;AACE,eAAO;AAAO,UAAA,KAAK,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACA;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,OAAO,EAAE,KAAK5B,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADP;;AAEF,WAAK,eAAL;AACE,eAAO;AAAQ,UAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACA;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,OAAO,EAAE,KAAKC,cAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADP;;AAEF;AACE,eAAO;AAAK,UAAA,GAAG,EAAE4B,OAAO,CAAC,YAAD,CAAjB;AAAiC,UAAA,GAAG,EAAC,mBAArC;AAAyD,UAAA,OAAO,EAAE,KAAK9B,QAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AARJ;AAUD;;AACDA,EAAAA,QAAQ,GAAG;AACX,SAAKhB,KAAL,CAAWC,cAAX,GAA4B,eAA5B;AACA,SAAK8C,KAAL,GAAaC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAb;AACAC,IAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEL,MAAAA,KAAK,EAAE;AAAEM,QAAAA,UAAU,EAAE;AAAd,OAAT;AAAwCC,MAAAA,KAAK,EAAE;AAA/C,KAApC,EACGhB,IADH,CACQiB,gBAAgB,IAAI;AACxB,WAAKR,KAAL,CAAWS,SAAX,GAAuBD,gBAAvB;AACA,WAAKR,KAAL,CAAWU,IAAX;AACD,KAJH,EAKG5B,KALH,CAKS6B,GAAG,IAAI;AACZ5B,MAAAA,OAAO,CAACC,KAAR,8BAA2C2B,GAA3C;AACD,KAPH;AAQC;;AACDzC,EAAAA,UAAU,GAAG;AACX,SAAK8B,KAAL,CAAWY,KAAX;AACA,SAAK3D,KAAL,CAAWC,cAAX,GAA4B,eAA5B;AACA,SAAK2D,MAAL,GAAcZ,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAd;AACA,SAAKY,GAAL,GAAW,KAAKD,MAAL,CAAYE,UAAZ,CAAuB,IAAvB,CAAX;AACA,UAAMC,KAAK,GAAG,KAAKhB,KAAL,CAAWiB,UAAzB;AACA,UAAMvD,MAAM,GAAG,KAAKsC,KAAL,CAAWkB,WAA1B;AACA,SAAKL,MAAL,CAAYG,KAAZ,GAAoBA,KAApB;AACA,SAAKH,MAAL,CAAYnD,MAAZ,GAAqBA,MAArB;AACA,SAAKoD,GAAL,CAASK,SAAT,CAAmB,KAAKnB,KAAxB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCgB,KAArC,EAA4CtD,MAA5C;AACA,UAAM0D,OAAO,GAAG,KAAKP,MAAL,CAAYQ,SAAZ,CAAsB,YAAtB,CAAhB;AACA,SAAKzB,QAAL,CAAc;AAAC9B,MAAAA,OAAO,EAAGsD;AAAX,KAAd;AACD;;AACDjD,EAAAA,cAAc,GAAG;AACf,SAAK6B,KAAL,CAAWS,SAAX,CAAqBa,SAArB,GAAiC,CAAjC,EAAoCC,IAApC;AACD;;AACDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAM,MAAA,EAAE,EAAC,SAAT;AAAmB,MAAA,QAAQ,EAAE,KAAKpD,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEG;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,MAAzB;AAAgC,MAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWI,KAAlD;AAAyD,MAAA,QAAQ,EAAE,KAAKU,UAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEG;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,MAAxB;AAA+B,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWK,IAAjD;AAAuD,MAAA,QAAQ,EAAE,KAAKS,UAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CANF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEG;AAAO,MAAA,IAAI,EAAC,IAAZ;AAAiB,MAAA,IAAI,EAAC,MAAtB;AAA6B,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWM,EAA/C;AAAmD,MAAA,QAAQ,EAAE,KAAKQ,UAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAXF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEG;AAAO,MAAA,IAAI,EAAC,KAAZ;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAA8B,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWO,GAAhD;AAAqD,MAAA,QAAQ,EAAE,KAAKO,UAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAhBF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAEG;AAAO,MAAA,IAAI,EAAC,KAAZ;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAA8B,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWQ,GAAhD;AAAqD,MAAA,QAAQ,EAAE,KAAKM,UAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CArBF,EAyBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBF,EA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEG;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,MAA1B;AAAiC,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWS,MAAnD;AAA2D,MAAA,QAAQ,EAAE,KAAKK,UAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CA1BF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9BF,EA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEG;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,MAA1B;AAAiC,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWU,MAAnD;AAA2D,MAAA,QAAQ,EAAE,KAAKI,UAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CA/BF,EAmCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnCF,EAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEG;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,MAA5B;AAAmC,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWW,QAArD;AAA+D,MAAA,QAAQ,EAAE,KAAKG,UAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CApCF,EAwCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCF,EAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEG;AAAO,MAAA,IAAI,EAAC,aAAZ;AAA0B,MAAA,IAAI,EAAC,MAA/B;AAAsC,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWY,WAAxD;AAAqE,MAAA,QAAQ,EAAE,KAAKE,UAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CAzCF,EA6CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CF,EA8CG,KAAK8B,cAAL,CAAoB,KAAK5C,KAAL,CAAWC,cAA/B,CA9CH,EA+CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/CF,EAgDE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhDF,CAFF,CADF;AAuDD;;AA7JyB;;AAgK5B,eAAeH,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Stitch,\n  AnonymousCredential,\n  RemoteMongoClient\n} from \"mongodb-stitch-browser-sdk\";\nimport 'file-loader'\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      picture_status: undefined,\n      owner_id: undefined,\n      first: undefined,\n      last: undefined,\n      mi: undefined,\n      dob: undefined,\n      sex: undefined,\n      height: undefined,\n      weight: undefined,\n      campsite: undefined,\n      description: undefined,\n      picture: undefined,\n    };\n    this.handleFill = this.handleFill.bind(this);\n    this.getVideo = this.getVideo.bind(this);\n    this.getPicture = this.getPicture.bind(this);\n    this.confirmPicture = this.confirmPicture.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n\n  componentDidMount() {\n    this.client = Stitch.initializeDefaultAppClient(\"resp-nqkab\");\n    const mongodb = this.client.getServiceClient(\n      RemoteMongoClient.factory,\n      \"mongodb-atlas\"\n    );\n    this.db = mongodb.db(\"sample_disaster\");\n    this.client.auth\n      .loginWithCredential(new AnonymousCredential())\n      .catch(console.error);\n  }\n  addFound(event) {\n    event.preventDefault();\n    this.db\n      .collection(\"found\")\n      .insertOne({\n        owner_id: this.client.auth.user.id,\n        first: this.state.first,\n        last: this.state.last,\n        mi: this.state.mi,\n        dob: this.state.dob,\n        sex: this.state.sex,\n        height: this.state.height,\n        weight: this.state.weight,\n        campsite: this.state.campsite,\n        description: this.state.description,\n        picture: this.state.picture\n      })\n      .then(this.displayFound)\n      .catch(console.error);\n  }\n  handleFill(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({ [name] : value});\n  }\n  pictureControl(status) {\n    switch(status) {\n      case \"camera opened\":\n        return <video class=\"player\" ></video>,\n               <button type=\"button\" onClick={this.getPicture}>Take Picture</button>;\n      case \"picture taken\":\n        return <canvas class=\"picture\"></canvas>,\n               <button type=\"button\" onClick={this.confirmPicture}>Confirm Picture</button>;\n      default:\n        return <img src={require('camera.jpg')} alt=\"Image Unavailable\" onClick={this.getVideo}/>;\n    }\n  }\n  getVideo() {\n  this.state.picture_status = \"camera opened\";\n  this.video = document.querySelector('.player');\n  navigator.mediaDevices.getUserMedia({ video: { facingMode: \"environment\" }, audio: false })\n    .then(localMediaStream => {\n      this.video.srcObject = localMediaStream;\n      this.video.play();\n    })\n    .catch(err => {\n      console.error(`Error with getting media:`, err);\n    });\n  }\n  getPicture() {\n    this.video.pause();\n    this.state.picture_status = \"picture taken\"\n    this.canvas = document.querySelector('.picture');\n    this.ctx = this.canvas.getContext('2d');\n    const width = this.video.videoWidth;\n    const height = this.video.videoHeight;\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.ctx.drawImage(this.video, 0, 0, width, height);\n    const dataURL = this.canvas.toDataURL('image/jpeg');\n    this.setState({picture : dataURL});\n  }\n  confirmPicture() {\n    this.video.srcObject.getTracks()[0].stop();\n  }\n  render() {\n    return (\n      <div>\n        <h3>CheckIn</h3>\n        <form id='checkin' onSubmit={this.addFound}>\n          <label>\n            First Name:\n             <input name=\"first\" type=\"text\" value={this.state.first} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Last Name:\n             <input name=\"last\" type=\"text\" value={this.state.last} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Middle Initial:\n             <input name=\"mi\" type=\"text\" value={this.state.mi} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Date of Birth:\n             <input name=\"dob\" type=\"text\" value={this.state.dob} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Sex:\n             <input name=\"sex\" type=\"text\" value={this.state.sex} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Height:\n             <input name=\"height\" type=\"text\" value={this.state.height} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Weight:\n             <input name=\"weight\" type=\"text\" value={this.state.weight} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Campsite:\n             <input name=\"campsite\" type=\"text\" value={this.state.campsite} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          <label>\n            Description:\n             <input name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleFill} />\n          </label>\n          <p></p>\n          {this.pictureControl(this.state.picture_status)}\n          <p></p>\n          <input type=\"submit\" value=\"Submit\"/>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}