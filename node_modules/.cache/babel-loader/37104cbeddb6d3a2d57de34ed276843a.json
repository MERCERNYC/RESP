{"ast":null,"code":"import _objectSpread from \"/home/abiery/Projects/RESP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/abiery/Projects/RESP/src/components/AssignLocation.js\";\nimport React, { Component } from \"react\";\nimport { stitchClient, db } from '../stitch/database';\nimport { personToCard } from './PersonFound';\nimport Camera from './Camera';\nimport FinishCheckIn from './FinishCheckIn';\nimport { BrowserRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Form, Field } from 'react-final-form';\n\nfunction campsiteToButton(campsite) {\n  return React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, React.createElement(Field, {\n    name: \"campsite\",\n    component: \"input\",\n    type: \"radio\",\n    value: campsite.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }), ' ', \"Campsite \", campsite.name);\n}\n\nclass AssignCamp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = _objectSpread({}, this.props.location.state);\n    this.modal = false;\n    this.toNext = false;\n    this.getCampsites = this.getCampsites.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n\n  componentDidMount() {\n    this.getCampsites();\n  }\n\n  async getCampsites() {\n    var campsites = [];\n    await db.collection(\"campsites\").find({}).toArray().then(sites => {\n      sites.forEach(site => campsites.push(site));\n    }).catch(err => console.error(\"Failed to find documents: \".concat(err)));\n    this.campsites = campsites;\n  }\n\n  addFound(person) {\n    db.collection(\"found\").insertOne(person).catch(console.error);\n    alert('Check-in Successful! Redirecting home');\n    this.nextPage = React.createElement(Redirect, {\n      push: true,\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    });\n    this.toNext = true;\n    this.setState(this.state);\n  }\n\n  render() {\n    const onSubmit = values => {\n      const person = _objectSpread({}, this.state, {\n        campsite: values.campsite\n      });\n\n      delete person.found;\n    };\n\n    if (this.state.toNext) {\n      return React.createElement(Redirect, {\n        push: true,\n        to: {\n          pathname: \"\".concat(this.props.match.url, \"/finish\"),\n          state: _objectSpread({}, this.person)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Assign Location\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: onSubmit,\n      render: ({\n        handleSubmit,\n        form,\n        submitting,\n        pristine,\n        values\n      }) => React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, this.campsites.map(campsiteToButton)), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        disabled: submitting || pristine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Search\"), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: form.reset,\n        disabled: submitting || pristine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Reset\"))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      isOpen: this.modal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst AssignLocation = ({\n  match\n}) => React.createElement(Router, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 98\n  },\n  __self: this\n}, React.createElement(Route, {\n  exact: true,\n  path: \"\".concat(match.path),\n  component: AssignCamp,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 99\n  },\n  __self: this\n}), React.createElement(Route, {\n  path: \"\".concat(match.path, \"/finish\"),\n  component: FinishCheckIn,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 100\n  },\n  __self: this\n}));\n\nexport default AssignLocation;","map":{"version":3,"sources":["/home/abiery/Projects/RESP/src/components/AssignLocation.js"],"names":["React","Component","stitchClient","db","personToCard","Camera","FinishCheckIn","BrowserRouter","Router","Route","Redirect","Switch","Modal","ModalHeader","ModalBody","ModalFooter","Form","Field","campsiteToButton","campsite","name","AssignCamp","constructor","props","state","location","modal","toNext","getCampsites","bind","addFound","componentDidMount","campsites","collection","find","toArray","then","sites","forEach","site","push","catch","err","console","error","person","insertOne","alert","nextPage","setState","render","onSubmit","values","found","pathname","match","url","handleSubmit","form","submitting","pristine","map","reset","AssignLocation","path"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { stitchClient, db } from '../stitch/database';\nimport { personToCard } from './PersonFound';\nimport Camera from './Camera';\nimport FinishCheckIn from './FinishCheckIn';\nimport {BrowserRouter as Router, Route, Redirect, Switch} from 'react-router-dom';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Form, Field } from 'react-final-form';\n\nfunction campsiteToButton(campsite) {\n  return (<label>\n            <Field\n            name=\"campsite\"\n            component=\"input\"\n            type=\"radio\"\n            value={campsite.name}\n            />{' '}\n            Campsite {campsite.name}\n          </label>);\n}\n\nclass AssignCamp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {...this.props.location.state};\n    this.modal = false;\n    this.toNext = false;\n    this.getCampsites = this.getCampsites.bind(this);\n    this.addFound = this.addFound.bind(this);\n  }\n  componentDidMount() {\n    this.getCampsites();\n  }\n  async getCampsites() {\n    var campsites = []\n    await db\n      .collection(\"campsites\")\n      .find({})\n      .toArray()\n      .then(sites => {\n        sites.forEach(site => campsites.push(site));\n      })\n      .catch(err => console.error(`Failed to find documents: ${err}`));\n    this.campsites = campsites;\n  }\n  addFound(person) {\n    db\n      .collection(\"found\")\n      .insertOne(person)\n      .catch(console.error);\n    alert('Check-in Successful! Redirecting home');\n    this.nextPage = <Redirect push to='/'/>;\n    this.toNext = true;\n    this.setState(this.state);\n  }\n  render() {\n    const onSubmit = (values) => {\n      const person = {...this.state, campsite : values.campsite}\n      delete person.found;\n    }\n    if(this.state.toNext) {\n      return <Redirect push to={{pathname: `${this.props.match.url}/finish`, state: {...this.person}}}/>\n    }\n    return(\n      <div>\n      <h3>Assign Location</h3>\n      <div>\n      <Form\n        onSubmit={onSubmit}\n        render={({ handleSubmit, form, submitting, pristine, values }) => (\n        <form onSubmit={handleSubmit}>\n          <div>\n            {this.campsites.map(campsiteToButton)}\n          </div>\n          <div className=\"buttons\">\n              <button type=\"submit\" disabled={submitting || pristine}>\n                Search\n              </button>\n              <button\n                type=\"button\"\n                onClick={form.reset}\n                disabled={submitting || pristine}\n              >\n                Reset\n              </button>\n            </div>\n        </form>\n        )}/>\n      </div>\n        <Modal isOpen={this.modal}>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst AssignLocation = ({match}) => (\n      <Router>\n        <Route exact path={`${match.path}`} component={AssignCamp} />\n        <Route path={`${match.path}/finish`} component={FinishCheckIn} />\n      </Router>\n    );\n\nexport default AssignLocation;\n"]},"metadata":{},"sourceType":"module"}